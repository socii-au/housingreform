{"version":3,"file":"PublicHousingCounter-CvXLTJVO.js","sources":["../../src/components/PublicHousingCounter.tsx"],"sourcesContent":["import { useModel, scopeLabel } from \"../model/ModelContext\";\nimport { HELP, HelpExpander, InfoTooltip } from \"./shared/HelpText\";\n\nfunction fmtInt(n: number): string {\n  return new Intl.NumberFormat(\"en-AU\").format(Math.round(n));\n}\n\nfunction fmtAUD(n: number): string {\n  return new Intl.NumberFormat(\"en-AU\", {\n    style: \"currency\",\n    currency: \"AUD\",\n    maximumFractionDigits: 0,\n  }).format(n);\n}\n\nfunction fmtPct(n: number): string {\n  const sign = n >= 0 ? \"+\" : \"\";\n  return `${sign}${(n * 100).toFixed(1)}%`;\n}\n\nfunction SummaryCard({\n  label,\n  value,\n  detail,\n  tooltip,\n  trend,\n}: {\n  label: string;\n  value: string;\n  detail?: string;\n  tooltip?: string;\n  trend?: \"up\" | \"down\" | \"neutral\";\n}) {\n  const trendColors = {\n    up: \"#dc2626\",\n    down: \"#16a34a\",\n    neutral: \"#6b7280\",\n  };\n  const trendIcons = {\n    up: \"↑\",\n    down: \"↓\",\n    neutral: \"→\",\n  };\n\n  return (\n    <div className=\"panel\" style={{ padding: 14 }}>\n      <div className=\"muted\" style={{ fontSize: 12, display: \"flex\", alignItems: \"center\", gap: 4 }}>\n        {label}\n        {tooltip && <InfoTooltip text={tooltip} />}\n      </div>\n      <div\n        style={{\n          fontSize: 26,\n          fontWeight: 800,\n          letterSpacing: \"-0.02em\",\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 8,\n        }}\n      >\n        {value}\n        {trend && (\n          <span style={{ fontSize: 14, color: trendColors[trend] }}>\n            {trendIcons[trend]}\n          </span>\n        )}\n      </div>\n      {detail && (\n        <div className=\"muted\" style={{ fontSize: 12, marginTop: 4 }}>\n          {detail}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction MetricExplainer({\n  title,\n  description,\n}: {\n  title: string;\n  description: string;\n}) {\n  return (\n    <div style={{ padding: \"8px 12px\", background: \"var(--bg-subtle)\", borderRadius: 6, fontSize: 12 }}>\n      <div style={{ fontWeight: 600 }}>{title}</div>\n      <div className=\"muted\">{description}</div>\n    </div>\n  );\n}\n\nexport function SummaryCounter() {\n  const { scope, scopedView, params } = useModel();\n  const summaryHelp = HELP.summary;\n\n  const { years, summary } = scopedView;\n  const first = years[0];\n  const last = years[years.length - 1];\n\n  if (!first || !last) {\n    return null;\n  }\n\n  const newDwellings = last.dwellingStock - first.dwellingStock;\n  const simulationYears = summary.yearN - summary.year0;\n\n  // Determine trends for color coding\n  const priceTrend =\n    summary.medianPriceChangePct > 0.5 ? \"up\" :\n    summary.medianPriceChangePct < 0.2 ? \"down\" : \"neutral\";\n  const rentTrend =\n    summary.medianRentChangePct > 0.5 ? \"up\" :\n    summary.medianRentChangePct < 0.2 ? \"down\" : \"neutral\";\n  const costIndexTrend =\n    summary.housingCostIndexChangePct > 0.3 ? \"up\" :\n    summary.housingCostIndexChangePct < 0.1 ? \"down\" : \"neutral\";\n\n  // Calculate some additional context\n  const priceGrowthPA = Math.pow(1 + summary.medianPriceChangePct, 1 / simulationYears) - 1;\n  const rentGrowthPA = Math.pow(1 + summary.medianRentChangePct, 1 / simulationYears) - 1;\n  const populationChange = last.population - first.population;\n  const dwellingsPerCapita = newDwellings / populationChange;\n\n  return (\n    <div className=\"card\" style={{ padding: 14 }}>\n      <div className=\"h2\" style={{ marginBottom: 4 }}>\n        Scenario summary — {scopeLabel(scope)}\n      </div>\n      <div className=\"muted\" style={{ fontSize: 13, marginBottom: 12 }}>\n        Key outcomes over the {simulationYears} year simulation period.\n      </div>\n\n      <div className=\"grid2\">\n        <SummaryCard\n          label={summaryHelp.priceChange.title}\n          value={fmtPct(summary.medianPriceChangePct)}\n          detail={`${fmtAUD(first.medianPrice)} → ${fmtAUD(last.medianPrice)} (${fmtPct(priceGrowthPA)}/yr)`}\n          tooltip={summaryHelp.priceChange.description}\n          trend={priceTrend}\n        />\n        <SummaryCard\n          label={summaryHelp.rentChange.title}\n          value={fmtPct(summary.medianRentChangePct)}\n          detail={`${fmtAUD(first.medianAnnualRent)} → ${fmtAUD(last.medianAnnualRent)}/yr (${fmtPct(rentGrowthPA)}/yr)`}\n          tooltip={summaryHelp.rentChange.description}\n          trend={rentTrend}\n        />\n      </div>\n\n      <div className=\"grid2\" style={{ marginTop: 12 }}>\n        <SummaryCard\n          label={summaryHelp.newDwellings.title}\n          value={fmtInt(newDwellings)}\n          detail={`Stock: ${fmtInt(first.dwellingStock)} → ${fmtInt(last.dwellingStock)} | ${dwellingsPerCapita.toFixed(2)} per new resident`}\n          tooltip={summaryHelp.newDwellings.description}\n        />\n        <SummaryCard\n          label={summaryHelp.housingCostIndex.title}\n          value={fmtPct(summary.housingCostIndexChangePct)}\n          detail=\"Composite of price + rent vs wages\"\n          tooltip={summaryHelp.housingCostIndex.description}\n          trend={costIndexTrend}\n        />\n      </div>\n\n      {/* Additional context */}\n      <div style={{ marginTop: 14, display: \"grid\", gridTemplateColumns: \"repeat(3, 1fr)\", gap: 8 }}>\n        <MetricExplainer\n          title=\"Population growth\"\n          description={`+${fmtInt(populationChange)} (${fmtPct(populationChange / first.population)})`}\n        />\n        <MetricExplainer\n          title=\"Years modeled\"\n          description={`${summary.year0} → ${summary.yearN} (${simulationYears} years)`}\n        />\n        <MetricExplainer\n          title=\"Ramp period\"\n          description={`${params.policy.rampYears} years to full policy effect`}\n        />\n      </div>\n\n      <HelpExpander summary=\"Understanding these metrics\">\n        <ul style={{ margin: 0, paddingLeft: 16 }}>\n          <li><strong>Price/rent change:</strong> {summaryHelp.priceChange.interpretation}</li>\n          <li><strong>Net dwellings:</strong> {summaryHelp.newDwellings.interpretation}</li>\n          <li><strong>Housing cost index:</strong> {summaryHelp.housingCostIndex.interpretation}</li>\n        </ul>\n      </HelpExpander>\n\n      <HelpExpander summary=\"Reading the trend indicators\">\n        <ul style={{ margin: 0, paddingLeft: 16 }}>\n          <li><span style={{ color: \"#dc2626\" }}>↑ Red:</span> Fast growth — affordability worsening</li>\n          <li><span style={{ color: \"#6b7280\" }}>→ Gray:</span> Moderate growth — mixed impact</li>\n          <li><span style={{ color: \"#16a34a\" }}>↓ Green:</span> Slow/negative growth — affordability improving</li>\n        </ul>\n        <p style={{ margin: \"8px 0 0 0\", fontStyle: \"italic\" }}>\n          Note: All values are nominal (not inflation-adjusted). Real affordability depends on wage growth.\n        </p>\n      </HelpExpander>\n    </div>\n  );\n}\n\nexport { SummaryCounter as PublicHousingCounter };\n"],"names":["fmtInt","n","fmtAUD","fmtPct","SummaryCard","label","value","detail","tooltip","trend","trendColors","trendIcons","jsxs","jsx","InfoTooltip","MetricExplainer","title","description","SummaryCounter","scope","scopedView","params","useModel","summaryHelp","HELP","years","summary","first","last","newDwellings","simulationYears","priceTrend","rentTrend","costIndexTrend","priceGrowthPA","rentGrowthPA","populationChange","dwellingsPerCapita","scopeLabel","HelpExpander"],"mappings":"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"}