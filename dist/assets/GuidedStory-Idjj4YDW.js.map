{"version":3,"file":"GuidedStory-Idjj4YDW.js","sources":["../../src/routes/GuidedStory.tsx"],"sourcesContent":["import { DecileImpact } from \"../components/charts/DecileImpact\";\nimport { DwellingStockArea } from \"../components/charts/OwnershipMixArea\";\nimport { PriceVsBaseline } from \"../components/charts/PriceVsBaseline\";\nimport { PolicyChannelsFlow } from \"../components/InvestorFlow\";\nimport { SummaryCounter } from \"../components/PublicHousingCounter\";\nimport { useModel, scopeLabel } from \"../model/ModelContext\";\nimport { HelpExpander, LimitationsBox } from \"../components/shared/HelpText\";\nimport type { TimelinePoint } from \"../model/history/types\";\n\nfunction fmtAUD(n: number): string {\n  return new Intl.NumberFormat(\"en-AU\", {\n    style: \"currency\",\n    currency: \"AUD\",\n    maximumFractionDigits: 0,\n  }).format(n);\n}\n\nfunction fmtPct(n: number): string {\n  const sign = n >= 0 ? \"+\" : \"\";\n  return `${sign}${(n * 100).toFixed(1)}%`;\n}\n\nfunction Section({\n  title,\n  kicker,\n  step,\n  children,\n  highlight,\n}: {\n  title: string;\n  kicker?: string;\n  step?: number;\n  children: React.ReactNode;\n  highlight?: \"green\" | \"yellow\" | \"blue\";\n}) {\n  const tone =\n    highlight === \"green\"\n      ? \"tone-success\"\n      : highlight === \"yellow\"\n        ? \"tone-warning\"\n        : highlight === \"blue\"\n          ? \"tone-info\"\n          : \"tone-neutral\";\n\n  return (\n    <section className={`card ${tone}`} style={{ padding: 20, marginBottom: 20 }}>\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 12, marginBottom: 12 }}>\n        {step && (\n          <div\n            style={{\n              width: 32,\n              height: 32,\n              borderRadius: \"50%\",\n              background: \"var(--brand)\",\n              color: \"white\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              fontWeight: 800,\n              fontSize: 14,\n            }}\n          >\n            {step}\n          </div>\n        )}\n        <div>\n          <div className=\"h2\" style={{ margin: 0 }}>{title}</div>\n          {kicker && <div className=\"muted\" style={{ fontSize: 13, marginTop: 2 }}>{kicker}</div>}\n        </div>\n      </div>\n      {children}\n    </section>\n  );\n}\n\nfunction Callout({\n  type,\n  children,\n}: {\n  type: \"info\" | \"warning\" | \"success\";\n  children: React.ReactNode;\n}) {\n  return (\n    <div className={`callout ${type}`} style={{ marginTop: 12, display: \"flex\", gap: 10 }}>\n      <span>{type === \"info\" ? \"üí°\" : type === \"warning\" ? \"‚ö†Ô∏è\" : \"‚úì\"}</span>\n      <div style={{ fontSize: 13, lineHeight: 1.6 }}>{children}</div>\n    </div>\n  );\n}\n\nfunction PolicyCard({\n  title,\n  description,\n  effects,\n  tradeoffs,\n}: {\n  title: string;\n  description: string;\n  effects: string[];\n  tradeoffs: string[];\n}) {\n  return (\n    <div className=\"panel\" style={{ padding: 16 }}>\n      <div className=\"h3\" style={{ marginBottom: 8 }}>{title}</div>\n      <p className=\"muted\" style={{ margin: \"0 0 12px 0\", fontSize: 13 }}>{description}</p>\n\n      <div style={{ marginBottom: 12 }}>\n        <div style={{ fontWeight: 600, fontSize: 12, marginBottom: 4 }}>Expected effects:</div>\n        <ul style={{ margin: 0, paddingLeft: 18, fontSize: 13 }}>\n          {effects.map((e, i) => (\n            <li key={i} style={{ marginBottom: 2 }}>{e}</li>\n          ))}\n        </ul>\n      </div>\n\n      <div>\n        <div style={{ fontWeight: 600, fontSize: 12, marginBottom: 4, color: \"#b45309\" }}>Trade-offs:</div>\n        <ul style={{ margin: 0, paddingLeft: 18, fontSize: 13, color: \"#92400e\" }}>\n          {tradeoffs.map((t, i) => (\n            <li key={i} style={{ marginBottom: 2 }}>{t}</li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport function GuidedStory() {\n  const { scope, scopedView, outputs, params } = useModel();\n\n  const { years, summary } = scopedView;\n  // Convert RegionYearState[] to TimelinePoint[] for charts\n  const timelinePoints: TimelinePoint[] = years.map((y) => ({\n    ...y,\n    kind: \"projected\" as const,\n  }));\n  const first = timelinePoints[0];\n  const last = timelinePoints[timelinePoints.length - 1];\n\n  if (!first || !last) {\n    return <div className=\"container\">No data available</div>;\n  }\n\n  // Get Sydney's detailed data for deciles and policy channels\n  const sydneyYears = outputs.byCity.SYD?.years ?? [];\n  const sydneyLast = sydneyYears[sydneyYears.length - 1];\n\n  if (!first || !last) {\n    return (\n      <div style={{ padding: 40, textAlign: \"center\" }}>\n        <div style={{ fontSize: 24, marginBottom: 16 }}>‚è≥</div>\n        <div className=\"h2\">Loading simulation...</div>\n        <div className=\"muted\">Preparing guided analysis</div>\n      </div>\n    );\n  }\n\n  const policyDescription = (() => {\n    const parts: string[] = [];\n    if (params.policy.negativeGearingMode === \"remove\") {\n      parts.push(`negative gearing removal (${Math.round(params.policy.negativeGearingIntensity * 100)}%)`);\n    } else if (params.policy.negativeGearingMode === \"reverse\") {\n      parts.push(\"negative gearing restoration\");\n    }\n    if (params.policy.ownershipCapEnabled) {\n      parts.push(`ownership cap (${Math.round(params.policy.ownershipCapEnforcement * 100)}% enforcement)`);\n    }\n    if (params.policy.supplyBoost !== 0) {\n      parts.push(`${fmtPct(params.policy.supplyBoost)} supply boost`);\n    }\n    if (params.policy.demandReduction !== 0) {\n      parts.push(`${fmtPct(params.policy.demandReduction)} demand reduction`);\n    }\n    return parts.length > 0 ? parts.join(\" + \") : \"baseline (no policy changes)\";\n  })();\n\n  const simulationYears = summary.yearN - summary.year0;\n  const populationGrowth = ((last.population ?? 0) - (first.population ?? 0)) / Math.max(1, first.population ?? 1);\n  const priceGrowthPA = Math.pow(1 + summary.medianPriceChangePct, 1 / simulationYears) - 1;\n\n  return (\n    <div>\n      <div className=\"h1\">How housing policy affects the market</div>\n      <p className=\"muted\" style={{ marginTop: 0, marginBottom: 20 }}>\n        A guided walkthrough of the model, showing cause ‚Üí effect relationships for{\" \"}\n        <strong>{scopeLabel(scope)}</strong>. Designed to make the model's logic transparent and\n        assumptions explicit.\n      </p>\n\n      {/* Introduction */}\n      <Section\n        title=\"How to read this model\"\n        kicker=\"Think of this as a map, not a GPS. It shows directions, not precise destinations.\"\n        step={0}\n        highlight=\"blue\"\n      >\n        <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\", gap: 14 }}>\n          <div style={{ padding: 14, background: \"white\", borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, marginBottom: 6 }}>üèóÔ∏è Supply-demand model</div>\n            <div className=\"muted\" style={{ fontSize: 13 }}>\n              Prices and rents respond to the gap between housing stock and household demand.\n              More supply or less demand = lower prices.\n            </div>\n          </div>\n          <div style={{ padding: 14, background: \"white\", borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, marginBottom: 6 }}>‚öôÔ∏è Policy levers</div>\n            <div className=\"muted\" style={{ fontSize: 13 }}>\n              Negative gearing, ownership caps, and supply policies shift the balance.\n              Each has direct and indirect effects.\n            </div>\n          </div>\n          <div style={{ padding: 14, background: \"white\", borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, marginBottom: 6 }}>üìä Multi-scale views</div>\n            <div className=\"muted\" style={{ fontSize: 13 }}>\n              National, State, and City-level analysis. Results aggregated from\n              individual city simulations.\n            </div>\n          </div>\n          <div style={{ padding: 14, background: \"white\", borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, marginBottom: 6 }}>‚ö†Ô∏è Transparent uncertainty</div>\n            <div className=\"muted\" style={{ fontSize: 13 }}>\n              All assumptions stated explicitly. Limitations acknowledged.\n              This is illustrative, not predictive.\n            </div>\n          </div>\n        </div>\n\n        <Callout type=\"info\">\n          <strong>Current scenario:</strong> {policyDescription}\n          <br />\n          <span className=\"muted\">\n            {simulationYears} year simulation with {params.policy.rampYears} year policy ramp.\n            Use the \"Explore the Model\" tab to change settings.\n          </span>\n        </Callout>\n      </Section>\n\n      {/* Step 1: Starting conditions */}\n      <Section\n        title=\"Starting conditions\"\n        kicker={`The baseline state for ${scopeLabel(scope)} before any policy changes take effect`}\n        step={1}\n      >\n        <div className=\"grid2\">\n          <div className=\"panel\" style={{ padding: 16 }}>\n            <div className=\"h3\" style={{ marginBottom: 10 }}>Key metrics at year 0</div>\n            <div style={{ display: \"grid\", gap: 8 }}>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"8px 0\", borderBottom: \"1px solid var(--border)\" }}>\n                <span className=\"muted\">Population</span>\n                <strong>{(first.population ?? 0).toLocaleString()}</strong>\n              </div>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"8px 0\", borderBottom: \"1px solid var(--border)\" }}>\n                <span className=\"muted\">Dwelling stock</span>\n                <strong>{(first.dwellingStock ?? 0).toLocaleString()}</strong>\n              </div>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"8px 0\", borderBottom: \"1px solid var(--border)\" }}>\n                <span className=\"muted\">Median price</span>\n                <strong>{fmtAUD(first.medianPrice ?? 0)}</strong>\n              </div>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"8px 0\" }}>\n                <span className=\"muted\">Annual rent</span>\n                <strong>{fmtAUD(first.medianAnnualRent ?? 0)}</strong>\n              </div>\n            </div>\n\n            <HelpExpander summary=\"Where does this data come from?\">\n              Starting values are based on ABS Census data and CoreLogic/SQM indices,\n              scaled and adjusted for the model. These are indicative, not exact measurements.\n            </HelpExpander>\n          </div>\n          <PriceVsBaseline\n            title=\"Price trajectory\"\n            series={timelinePoints}\n            dataKey=\"medianPrice\"\n            baseValue={first?.medianPrice ?? 0}\n          />\n        </div>\n\n        <LimitationsBox\n          items={[\n            \"Does not forecast precise prices ‚Äî shows relative trajectories\",\n            \"Does not model interest rate paths, construction constraints, or within-city variation\",\n            \"Assumes continuation of underlying demographic trends\",\n          ]}\n        />\n      </Section>\n\n      {/* Step 2: Supply and demand */}\n      <Section\n        title=\"Supply and demand dynamics\"\n        kicker=\"Housing markets respond to the gap between availability and need\"\n        step={2}\n      >\n        <div className=\"grid2\">\n          <PriceVsBaseline\n            title=\"Rent trajectory\"\n            series={timelinePoints}\n            dataKey=\"medianAnnualRent\"\n            baseValue={first?.medianAnnualRent ?? 0}\n          />\n          <DwellingStockArea series={timelinePoints} />\n        </div>\n\n        <Callout type=\"info\">\n          <strong>Why prices move:</strong> When demand exceeds supply, bidding pushes prices up.\n          Policy can boost supply (more construction) or reduce demand (investor restrictions).\n          Over {simulationYears} years, population grows by {fmtPct(populationGrowth)} while\n          prices grow at {fmtPct(priceGrowthPA)}/year.\n        </Callout>\n\n        <HelpExpander summary=\"The supply-demand mechanism\">\n          <ol style={{ margin: 0, paddingLeft: 20 }}>\n            <li>Population growth creates new households needing homes</li>\n            <li>If housing completions lag household formation, the market tightens</li>\n            <li>Tighter markets = more competition = higher prices and rents</li>\n            <li>Higher prices eventually stimulate more construction (with lag)</li>\n            <li>Policy can accelerate or dampen these dynamics</li>\n          </ol>\n        </HelpExpander>\n      </Section>\n\n      {/* Step 3: Outcomes */}\n      <Section\n        title=\"Scenario outcomes\"\n        kicker=\"Key metrics from simulation start to end\"\n        step={3}\n        highlight=\"green\"\n      >\n        <div className=\"grid2\">\n          <SummaryCounter />\n          {sydneyYears.length > 0 && <PolicyChannelsFlow series={sydneyYears} />}\n        </div>\n\n        <HelpExpander summary=\"Reading the summary metrics\">\n          <ul style={{ margin: 0, paddingLeft: 16 }}>\n            <li><strong>Price/rent change:</strong> Total growth over the simulation period (nominal)</li>\n            <li><strong>Net dwellings:</strong> How much housing stock increased</li>\n            <li><strong>Housing cost index:</strong> Composite measure vs wage growth</li>\n            <li><strong>Color coding:</strong> Green = improving affordability, Red = worsening</li>\n          </ul>\n        </HelpExpander>\n      </Section>\n\n      {/* Step 4: Distributional impact */}\n      <Section\n        title=\"Who is affected?\"\n        kicker=\"Housing stress varies dramatically by income level\"\n        step={4}\n      >\n        {sydneyLast && <DecileImpact rows={sydneyLast.deciles.rows} />}\n\n        <Callout type=\"warning\">\n          Housing stress (spending {\">\"}30% of income on housing) hits lower income groups first.\n          Policy that eases prices/rents disproportionately helps those already in stress.\n        </Callout>\n\n        <div className=\"muted\" style={{ marginTop: 12, fontStyle: \"italic\", fontSize: 13 }}>\n          Note: Decile data shown for Sydney as a proxy. Actual distributions vary by city and\n          should be interpreted as illustrative, not measured.\n        </div>\n      </Section>\n\n      {/* Step 5: Policy comparison */}\n      <Section\n        title=\"Policy reform options\"\n        kicker=\"Different reform packages and their expected effects\"\n        step={5}\n        highlight=\"yellow\"\n      >\n        <div className=\"grid2\">\n          <PolicyCard\n            title=\"üö´ Negative gearing removal\"\n            description=\"Phase out the ability to offset investment property losses against other income\"\n            effects={[\n              \"Reduces after-tax returns for investors\",\n              \"Decreases investor demand over time\",\n              \"May moderate price growth long-term\",\n            ]}\n            tradeoffs={[\n              \"May temporarily reduce rental supply\",\n              \"Effects are gradual when phased\",\n              \"Existing investors may be grandfathered\",\n            ]}\n          />\n          <PolicyCard\n            title=\"üè† Ownership cap (1+1)\"\n            description=\"Limit individuals to 1 principal residence + 1 investment property\"\n            effects={[\n              \"Directly limits investor holdings\",\n              \"Triggers forced divestment of excess\",\n              \"Creates supply surge for purchasers\",\n            ]}\n            tradeoffs={[\n              \"Can create short-term rental shock\",\n              \"Complex to implement and enforce\",\n              \"May face legal challenges\",\n            ]}\n          />\n        </div>\n\n        <div style={{ marginTop: 16 }}>\n          <div className=\"grid2\">\n            <PolicyCard\n              title=\"üèóÔ∏è Supply boost\"\n              description=\"Increase housing completions through planning reform, faster approvals, or public investment\"\n              effects={[\n                \"Directly increases housing stock\",\n                \"Eases supply-demand imbalance\",\n                \"Benefits both renters and buyers\",\n              ]}\n              tradeoffs={[\n                \"Depends on construction capacity\",\n                \"Takes years to materialize\",\n                \"May face NIMBY resistance\",\n              ]}\n            />\n            <PolicyCard\n              title=\"üì¶ Comprehensive reform\"\n              description=\"Combine supply boost + NG removal + ownership cap for maximum effect\"\n              effects={[\n                \"Attacks problem from multiple angles\",\n                \"Supply + demand effects compound\",\n                \"Larger overall impact on affordability\",\n              ]}\n              tradeoffs={[\n                \"More politically difficult\",\n                \"Harder to attribute effects\",\n                \"Higher implementation complexity\",\n              ]}\n            />\n          </div>\n        </div>\n\n        <Callout type=\"success\">\n          <strong>Try different scenarios:</strong> Use the \"Explore the Model\" tab to experiment\n          with combinations. Presets include baseline, individual policies, and combined reforms.\n        </Callout>\n      </Section>\n\n      {/* Conclusion */}\n      <Section\n        title=\"Key takeaways\"\n        kicker=\"What we can and cannot learn from this model\"\n        highlight=\"blue\"\n      >\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 16 }}>\n          <div>\n            <div style={{ fontWeight: 700, marginBottom: 8, color: \"#16a34a\" }}>‚úì What the model shows</div>\n            <ul style={{ margin: 0, paddingLeft: 18, fontSize: 13 }}>\n              <li>Directional effects of policy changes</li>\n              <li>Relative magnitudes (which policies matter more)</li>\n              <li>Trade-offs between different approaches</li>\n              <li>How effects compound over time</li>\n              <li>Distributional impacts across income groups</li>\n            </ul>\n          </div>\n          <div>\n            <div style={{ fontWeight: 700, marginBottom: 8, color: \"#dc2626\" }}>‚úó What it cannot predict</div>\n            <ul style={{ margin: 0, paddingLeft: 18, fontSize: 13 }}>\n              <li>Exact future prices or rents</li>\n              <li>Interest rate paths or RBA responses</li>\n              <li>Short-term market volatility</li>\n              <li>Political feasibility of reforms</li>\n              <li>Regional variation within cities</li>\n            </ul>\n          </div>\n        </div>\n\n        <div\n          className=\"callout dark\"\n          style={{\n            marginTop: 20,\n            padding: 16,\n            textAlign: \"center\",\n            borderRadius: 12,\n          }}\n        >\n          <div style={{ fontSize: 16, fontWeight: 700, marginBottom: 8 }}>\n            üìä Ready to explore further?\n          </div>\n          <p style={{ margin: 0, opacity: 0.8, fontSize: 14 }}>\n            Switch to the \"Explore the Model\" tab to customize scenarios and see how different\n            policy combinations affect housing outcomes. Check the Assumptions footer for\n            full transparency on methodology.\n          </p>\n        </div>\n      </Section>\n    </div>\n  );\n}\n"],"names":["fmtAUD","n","fmtPct","Section","title","kicker","step","children","highlight","tone","jsxs","jsx","Callout","type","PolicyCard","description","effects","tradeoffs","e","i","t","GuidedStory","scope","scopedView","outputs","params","useModel","years","summary","timelinePoints","y","first","last","sydneyYears","sydneyLast","policyDescription","parts","simulationYears","populationGrowth","priceGrowthPA","scopeLabel","HelpExpander","PriceVsBaseline","LimitationsBox","DwellingStockArea","SummaryCounter","PolicyChannelsFlow","DecileImpact"],"mappings":"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"}