const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AustraliaCrisisMap-DbbdmbVb.js","assets/index-esmbmNjg.js","assets/index-DSUtHly0.css","assets/PriceVsBaseline-BmNlO85R.js","assets/generateCategoricalChart-B3kFxYYF.js","assets/LineChart-D7QY-fbC.js","assets/CartesianGrid-LO5VItcG.js","assets/WageVsHousingChart-5_pTe7MT.js","assets/OwnershipMixArea-OZseRz1T.js","assets/DecileImpact-D8hvvIRP.js","assets/InvestorFlow-Bix7hFVQ.js","assets/PublicHousingCounter-CvXLTJVO.js"])))=>i.map(i=>d[i]);
import{C as V,j as e,u as se,t as Z,r as w,A as oe,S as ce,a as v,I as de,b as te,c as pe,d as ue,e as me,P as he,D as ge,s as X,H as ne,l as ye,f as xe,_ as L}from"./index-esmbmNjg.js";const fe=new Set(["__proto__","prototype","constructor"]);function re(n){return!fe.has(n)}function O(n){if(n==null||typeof n!="object")return!1;const a=Object.getPrototypeOf(n);return a===Object.prototype||a===null}function J(){return Object.create(null)}function F(n,a){const i=typeof n=="number"?n:typeof n=="string"?Number(n.trim()):NaN;if(!Number.isFinite(i))return null;const s=a?.min,l=a?.max;return typeof s=="number"&&i<s?s:typeof l=="number"&&i>l?l:i}function be(n){if(!O(n))return null;const a=F(n.startYear,{min:1800,max:2600}),i=F(n.endYear,{min:1800,max:2600}),s=n.byCity,l=n.meta;if(a==null||i==null||!O(s))return null;const u=new Set(V.map(o=>o.id)),d=J();for(const o of Object.keys(s)){if(!re(o)||!u.has(o))continue;const g=s[o];if(!O(g))continue;const m=Array.isArray(g.years)?g.years.slice(0,400).map(R=>F(R,{min:1800,max:2600})):null;if(!m||m.some(R=>R==null))continue;const P=m.length,C=R=>{const E=g[R];if(Array.isArray(E)&&E.length===P)return E.map(A=>{if(A==null)return null;const c=F(A,{min:0});return c??null})};d[o]={years:m,medianPrice:C("medianPrice"),medianAnnualRent:C("medianAnnualRent"),medianAnnualWage:C("medianAnnualWage"),population:C("population"),dwellingStock:C("dwellingStock")}}const x=O(l)?{notes:Array.isArray(l.notes)?l.notes.slice(0,50).filter(o=>typeof o=="string").map(o=>o.slice(0,240)):[],warnings:Array.isArray(l.warnings)?l.warnings.slice(0,50).filter(o=>typeof o=="string").map(o=>o.slice(0,240)):[],byCity:J()}:{notes:[],warnings:[],byCity:J()};return{startYear:a,endYear:i,byCity:d,meta:x}}function ve(n){let i=0,s=0,l=0,u=0;const d=be(n);if(!d)return{sanitized:null,report:{ok:!1,droppedCityKeys:0,keptCityKeys:0,droppedPoints:0,cappedPoints:0,maxYears:400}};const x=new Set(V.map(o=>o.id));return O(n?.byCity)&&Object.keys(n.byCity).forEach(o=>{!re(o)||!x.has(o)?i++:s++}),Object.keys(d.byCity).forEach(o=>{const g=d.byCity[o],m=Array.isArray(g?.years)?g.years.length:0;m>400&&(u+=m-400,g.years=g.years.slice(0,400),["medianPrice","medianAnnualRent","medianAnnualWage","population","dwellingStock"].forEach(P=>{Array.isArray(g[P])&&(g[P]=g[P].slice(0,400))}))}),{sanitized:d,report:{ok:!0,droppedCityKeys:i,keptCityKeys:s,droppedPoints:l,cappedPoints:u,maxYears:400}}}const le={labor:{label:"Labor",color:"#d11a2a",textColor:"#ffffff"},coalition:{label:"Coalition",color:"#0038a8",textColor:"#ffffff"},greens:{label:"Greens",color:"#0ea34a",textColor:"#ffffff"},nationals:{label:"Nationals",color:"#f4c430",textColor:"#1f2937"},independent:{label:"Independents",color:"#7c3aed",textColor:"#ffffff"},bipartisan:{label:"Bipartisan/Regulators",color:"#6b7280",textColor:"#ffffff"}},q=["labor","coalition","greens","nationals","independent","bipartisan"];function b({party:n}){const a=le[n];return e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",borderRadius:999,fontSize:11,fontWeight:700,background:a.color,color:a.textColor,letterSpacing:.2},"aria-label":`Party support: ${a.label}`,title:`Party support: ${a.label}`,children:a.label})}const B={"ng-remove":["labor"],"ng-remove-fast":["greens"],"ng-restore":["coalition"],"ownership-cap":["greens"],"ownership-cap-aggressive":["greens"],"supply-boost":["labor"],comprehensive:["independent"],"land-tax-transition":["coalition"],"macroprudential-tightening":["bipartisan"],"short-stay-clampdown":["greens"],"public-housing-build":["labor"],"migration-shock-down":["coalition"],"all-levers":["independent"]},D={"Negative Gearing":["labor","greens","coalition"],"Ownership Cap":["greens"],"Supply & Demand":["labor","coalition"],"Tax & investor incentives":["coalition"],"Credit / macro-prudential":["bipartisan"],"Demand-side subsidies":["labor"],"Rental settings":["greens","labor"],"Planning / infrastructure":["coalition","labor"],"Public & community housing":["labor","greens"],Population:["coalition"]},Y={negativeGearingMode:["labor","greens","coalition"],negativeGearingIntensity:["labor","greens","coalition"],ownershipCapEnabled:["greens"],ownershipCapEnforcement:["greens"],excessInvestorStockShare:["greens"],divestmentPhased:["greens"],supplyBoost:["labor","coalition"],demandReduction:["labor","coalition"],rentGrowthModifier:["greens","labor"],"taxInvestor.cgtDiscountDelta":["coalition"],"taxInvestor.landTaxShift":["coalition"],"taxInvestor.vacancyTaxIntensity":["coalition"],"taxInvestor.shortStayRegulationIntensity":["greens"],"taxInvestor.foreignBuyerRestrictionIntensity":["coalition"],"credit.serviceabilityBufferDelta":["bipartisan"],"credit.dtiCapTightness":["bipartisan"],"credit.investorLendingLimitTightness":["bipartisan"],"subsidies.firstHomeBuyerSubsidyIntensity":["labor"],"rental.rentAssistanceIntensity":["labor"],"rental.rentRegulationCap":["greens"],"rental.rentRegulationCoverage":["greens"],"rental.vacancyDecontrol":["greens"],"planning.upzoningIntensity":["coalition","labor"],"planning.infrastructureEnablement":["coalition","labor"],"planning.infrastructureLagYears":["coalition","labor"],"publicCommunity.publicHousingBuildBoost":["labor","greens"],"publicCommunity.publicHousingAcquisitionSharePerYear":["labor","greens"],"publicCommunity.conversionToSocialSharePerYear":["labor","greens"],"migration.netOverseasMigrationShock":["coalition"],stampDutyRateDelta:["coalition"],mortgageRateDelta:["bipartisan"],rampYears:["bipartisan"]};function je(n){const a={};q.forEach(l=>{a[l]=0}),n.forEach(l=>{a[l]=(a[l]??0)+1});const i=Math.max(0,...Object.values(a)),s=i>0?q.filter(l=>a[l]===i):[];return{counts:a,top:s}}function S(n){const a=n>0?"+":n<0?"âˆ’":"",i=Math.abs(n),s=Number.isInteger(i)?i.toFixed(0):i.toFixed(1);return`${a}${s}%`}function ie({tone:n,text:a}){return e.jsx("span",{className:`chip tone-${n}`,children:a})}function _({title:n,icon:a,defaultOpen:i=!0,tone:s,children:l}){const[u,d]=w.useState(i),x=s?`tone-${s}`:"";return e.jsxs("div",{className:`control-group ${x}`,children:[e.jsxs("button",{type:"button",className:"control-group-header",onClick:()=>d(!u),"aria-expanded":u,children:[e.jsx("span",{className:"control-group-icon",children:a}),e.jsx("span",{className:"control-group-title",children:n}),e.jsx("span",{className:"control-group-chevron",children:u?"â–¾":"â–¸"})]}),u&&e.jsx("div",{className:"control-group-body",children:l})]})}function j({label:n,value:a,min:i,max:s,step:l,onChange:u,format:d,tooltip:x}){const o=d?d(a):String(a);return e.jsxs("div",{className:"slider-field",children:[e.jsxs("div",{className:"slider-field-label",children:[e.jsxs("span",{children:[n,": ",e.jsx("strong",{children:o})]}),x&&e.jsx(de,{text:x})]}),e.jsx("input",{type:"range",min:i,max:s,step:l,value:a,onChange:g=>u(Number(g.target.value))})]})}function Ce(){const{params:n,scope:a,patchPolicy:i,setYears:s,selectNational:l,selectState:u,selectCity:d,applyPreset:x,togglePreset:o,presetId:g,selectedPresets:m,resetToDefaults:P,includeAllCities:C,toggleCityCoverage:R,engine:E,setEngine:A,showHistory:c,setShowHistory:h,historyIndexBase:I,setHistoryIndexBase:T,ratePath:f,setRatePath:N,autoRba:k,setAutoRba:H,autoRbaMessage:z}=se(),p=Z(n.policy),$=!!n.advanced?.calibration?.enabled&&!!n.advanced?.calibration?.historyByCity,[G,K]=w.useState(!1),W=a.level==="national"?"NATIONAL":a.level==="state"?`STATE:${a.state}`:`CITY:${a.city}`,U=t=>{t==="NATIONAL"?l():t.startsWith("STATE:")?u(t.replace("STATE:","")):t.startsWith("CITY:")&&d(t.replace("CITY:",""))},r=C?V:V.filter(t=>t.isCapital),y=r.length;return e.jsxs("div",{className:"controls-panel",children:[e.jsxs("div",{className:"controls-header",children:[e.jsx("h2",{className:"h3",style:{margin:0},children:"Scenario Controls"}),e.jsx("button",{type:"button",className:"btn-reset",onClick:P,children:"â†º Reset"})]}),e.jsxs(_,{title:"Scenario & Scope",icon:"ðŸŽ¯",defaultOpen:!0,children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Policy Scenarios (multi-select)"}),e.jsx("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:8},children:"Select multiple scenarios to stack their effects. Effects combine additively where applicable."}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6,padding:"6px 8px",background:"var(--bg-subtle)",borderRadius:8,marginBottom:10},"aria-label":"Policy color key",children:[e.jsx("span",{style:{fontSize:11,fontWeight:700,color:"var(--muted)",marginRight:4},children:"Color key:"}),q.map(t=>e.jsx(b,{party:t},t))]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("baseline"),onChange:()=>o("baseline"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ“Š Baseline (No Change)"})]}),e.jsxs("div",{style:{marginTop:4,paddingLeft:20,borderLeft:"2px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"var(--muted)",marginBottom:6},children:"Reforms"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("ng-remove"),onChange:()=>o("ng-remove"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ”§ Remove Negative Gearing"}),B["ng-remove"]?.map(t=>e.jsx(b,{party:t},`ng-remove-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("ng-remove-fast"),onChange:()=>o("ng-remove-fast"),style:{cursor:"pointer"}}),e.jsx("span",{children:"âš¡ Remove NG (Immediate)"}),B["ng-remove-fast"]?.map(t=>e.jsx(b,{party:t},`ng-remove-fast-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("ng-restore"),onChange:()=>o("ng-restore"),style:{cursor:"pointer"}}),e.jsx("span",{children:"â†©ï¸ Restore Negative Gearing"}),B["ng-restore"]?.map(t=>e.jsx(b,{party:t},`ng-restore-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("ownership-cap"),onChange:()=>o("ownership-cap"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ  Ownership Cap (1 PPOR + 1 IP)"}),B["ownership-cap"]?.map(t=>e.jsx(b,{party:t},`ownership-cap-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("ownership-cap-aggressive"),onChange:()=>o("ownership-cap-aggressive"),style:{cursor:"pointer"}}),e.jsx("span",{children:"âš”ï¸ Ownership Cap (Aggressive)"}),B["ownership-cap-aggressive"]?.map(t=>e.jsx(b,{party:t},`ownership-cap-aggressive-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("supply-boost"),onChange:()=>o("supply-boost"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ—ï¸ Supply Boost +20%"}),B["supply-boost"]?.map(t=>e.jsx(b,{party:t},`supply-boost-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("comprehensive"),onChange:()=>o("comprehensive"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ“¦ Comprehensive Reform"}),B.comprehensive?.map(t=>e.jsx(b,{party:t},`comprehensive-${t}`))]})]}),e.jsxs("div",{style:{marginTop:4,paddingLeft:20,borderLeft:"2px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"var(--muted)",marginBottom:6},children:"Expert Presets"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("land-tax-transition"),onChange:()=>o("land-tax-transition"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ§¾ Land Tax Transition"}),B["land-tax-transition"]?.map(t=>e.jsx(b,{party:t},`land-tax-transition-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("macroprudential-tightening"),onChange:()=>o("macroprudential-tightening"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ¦ Macroprudential Tightening"}),B["macroprudential-tightening"]?.map(t=>e.jsx(b,{party:t},`macroprudential-tightening-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("short-stay-clampdown"),onChange:()=>o("short-stay-clampdown"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ›ï¸ Short-Stay Clampdown"}),B["short-stay-clampdown"]?.map(t=>e.jsx(b,{party:t},`short-stay-clampdown-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("public-housing-build"),onChange:()=>o("public-housing-build"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ˜ï¸ Public Housing Build"}),B["public-housing-build"]?.map(t=>e.jsx(b,{party:t},`public-housing-build-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("migration-shock-down"),onChange:()=>o("migration-shock-down"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ§³ Migration Shock (Lower)"}),B["migration-shock-down"]?.map(t=>e.jsx(b,{party:t},`migration-shock-down-${t}`))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m.includes("all-levers"),onChange:()=>o("all-levers"),style:{cursor:"pointer"}}),e.jsx("span",{children:"ðŸ§ª All Levers (Stress Test)"}),B["all-levers"]?.map(t=>e.jsx(b,{party:t},`all-levers-${t}`))]})]}),m.length>1&&e.jsxs("div",{style:{marginTop:8,padding:8,background:"var(--accent-light)",borderRadius:6,fontSize:11},children:[e.jsxs("strong",{children:["Stacking ",m.length," scenarios:"]})," Effects combine additively (supply/demand) or use maximum (restrictions)."]})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Model engine"}),e.jsxs("select",{value:E??"aggregate",onChange:t=>A(t.target.value),className:"select-field",children:[e.jsx("option",{value:"aggregate",children:"âš¡ Aggregate (fast)"}),e.jsx("option",{value:"advanced",children:"ðŸ§  Advanced (spatial + portfolio)"})]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:4},children:"Advanced mode couples cities via migration (spatial equilibrium) and adds heterogeneous expectations + investor portfolio allocation. Microdata (if provided) can replace the decile proxy for stress rates."})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Geographic view"}),e.jsxs("select",{value:W,onChange:t=>U(t.target.value),className:"select-field",children:[e.jsx("option",{value:"NATIONAL",children:"ðŸ‡¦ðŸ‡º National"}),e.jsx("optgroup",{label:"States",children:oe.map(t=>e.jsx("option",{value:`STATE:${t}`,children:ce[t]},t))}),e.jsx("optgroup",{label:"Cities",children:r.map(t=>e.jsx("option",{value:`CITY:${t.id}`,children:t.name},t.id))})]})]}),e.jsxs("label",{className:"checkbox-field",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:t=>R(t.target.checked)}),e.jsxs("span",{children:["Include regional cities (",y," total)"]})]}),e.jsx(j,{label:"Years",value:n.years,min:5,max:30,step:1,onChange:s,tooltip:v.horizon.tooltip}),e.jsxs("div",{className:"field",style:{marginTop:10},children:[e.jsx("label",{className:"field-label",children:"Timeline"}),e.jsxs("label",{className:"checkbox-field",style:{marginTop:6},children:[e.jsx("input",{type:"checkbox",checked:c,onChange:t=>h(t.target.checked)}),e.jsx("span",{children:"Show historical overlay (2000 â†’ present)"})]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:4},children:"Historical lines appear muted. Projections begin at the city baseline year."}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,alignItems:"center"},children:[e.jsx("span",{className:"muted",style:{fontSize:12},children:"Index base:"}),e.jsxs("select",{value:I,onChange:t=>T(t.target.value),className:"select-field",style:{maxWidth:220},children:[e.jsx("option",{value:"history",children:"Year 2000 (or earliest available)"}),e.jsx("option",{value:"year0",children:"Baseline year (model start)"})]})]})]}),e.jsxs("div",{className:"field",style:{marginTop:14},children:[e.jsx("label",{className:"field-label",children:"RBA policy path"}),e.jsxs("label",{className:"checkbox-field",style:{marginTop:6},children:[e.jsx("input",{type:"checkbox",checked:k,onChange:t=>H(t.target.checked)}),e.jsx("span",{children:"Autoâ€‘select RBA response"})]}),k&&e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:4},children:z}),e.jsxs("div",{style:{display:"grid",gap:6,marginTop:8},children:[e.jsxs("select",{value:f.mode??"scenario",onChange:t=>N({...f,mode:t.target.value}),className:"select-field",disabled:k,children:[e.jsx("option",{value:"scenario",children:"Scenario"}),e.jsx("option",{value:"fixed",children:"Fixed"}),e.jsx("option",{value:"rule",children:"RBA rule (simple)"})]}),f.mode==="scenario"&&e.jsxs("select",{value:f.scenario??"steady",onChange:t=>N({...f,scenario:t.target.value}),className:"select-field",disabled:k,children:[e.jsx("option",{value:"steady",children:"Steady"}),e.jsx("option",{value:"tighten",children:"Tighten"}),e.jsx("option",{value:"ease",children:"Ease"}),e.jsx("option",{value:"highForLonger",children:"High for longer"}),e.jsx("option",{value:"cutThenNormalize",children:"Cut then normalize"})]})]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:6},children:"Base rate is aligned to the latest RBA cash rate if provided in historical data; otherwise it uses the city baseline mortgage rate."})]})]}),e.jsxs(_,{title:"Negative Gearing",icon:"ðŸ”§",defaultOpen:!0,tone:"warning",children:[e.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:D["Negative Gearing"].map(t=>e.jsx(b,{party:t},`ng-${t}`))}),e.jsx("div",{className:"field",children:e.jsxs("select",{value:n.policy.negativeGearingMode,onChange:t=>i({negativeGearingMode:t.target.value}),className:"select-field",children:[e.jsx("option",{value:"none",children:"No change"}),e.jsx("option",{value:"remove",children:"Remove / phase out"}),e.jsx("option",{value:"reverse",children:"Restore"})]})}),n.policy.negativeGearingMode!=="none"&&e.jsx(j,{label:"Intensity",value:n.policy.negativeGearingIntensity*100,min:0,max:100,step:10,onChange:t=>i({negativeGearingIntensity:t/100}),format:t=>`${t}%`,tooltip:v.negativeGearing.intensity.tooltip})]}),e.jsxs(_,{title:"Ownership Cap",icon:"ðŸ ",defaultOpen:!0,tone:"success",children:[e.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:D["Ownership Cap"].map(t=>e.jsx(b,{party:t},`oc-${t}`))}),e.jsxs("label",{className:"checkbox-field",children:[e.jsx("input",{type:"checkbox",checked:n.policy.ownershipCapEnabled,onChange:t=>i({ownershipCapEnabled:t.target.checked})}),e.jsx("span",{children:"Enable cap (1 PPOR + 1 IP)"})]}),n.policy.ownershipCapEnabled&&e.jsxs(e.Fragment,{children:[e.jsx(j,{label:"Enforcement",value:n.policy.ownershipCapEnforcement*100,min:0,max:100,step:10,onChange:t=>i({ownershipCapEnforcement:t/100}),format:t=>`${t}%`,tooltip:v.ownershipCap.enforcement.tooltip}),e.jsx(j,{label:"Excess stock",value:n.policy.excessInvestorStockShare*100,min:0,max:40,step:5,onChange:t=>i({excessInvestorStockShare:t/100}),format:t=>`${t}%`,tooltip:v.ownershipCap.excessStock.tooltip}),e.jsxs("label",{className:"checkbox-field",children:[e.jsx("input",{type:"checkbox",checked:n.policy.divestmentPhased,onChange:t=>i({divestmentPhased:t.target.checked})}),e.jsx("span",{children:"Phased divestment"})]})]})]}),e.jsxs(_,{title:"Supply & Demand",icon:"ðŸ“Š",defaultOpen:!1,children:[e.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:D["Supply & Demand"].map(t=>e.jsx(b,{party:t},`sd-${t}`))}),e.jsx(j,{label:"Supply boost (â€“10% to +25%)",value:n.policy.supplyBoost*100,min:-10,max:25,step:2.5,onChange:t=>i({supplyBoost:t/100}),format:S,tooltip:v.supplyBoost.tooltip}),e.jsx(j,{label:"Demand reduction (â€“5% to +15%)",value:n.policy.demandReduction*100,min:-5,max:15,step:2.5,onChange:t=>i({demandReduction:t/100}),format:S,tooltip:v.demandReduction.tooltip})]}),e.jsxs(_,{title:"Expert mode (calibration-first)",icon:"ðŸ§ª",defaultOpen:!1,tone:"info",children:[e.jsxs("label",{className:"checkbox-field",style:{marginBottom:8},children:[e.jsx("input",{type:"checkbox",checked:G,onChange:t=>K(t.target.checked)}),e.jsx("span",{children:"Show advanced policy levers"})]}),e.jsxs("div",{className:"muted",style:{fontSize:12,lineHeight:1.45,marginBottom:10},children:["These levers run without calibration, but should be treated as directional unless you supply historical series (affordability ratios) to the calibrator."," ",$?e.jsx(ie,{tone:"success",text:"Calibration data detected"}):e.jsx(ie,{tone:"warning",text:"No calibration data"})]}),G&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"10px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Tax & investor incentives"}),D["Tax & investor incentives"].map(t=>e.jsx(b,{party:t},`tax-${t}`))]}),e.jsx(j,{label:"CGT discount change (âˆ’25pp to +25pp)",value:p.taxInvestor.cgtDiscountDelta*100,min:-25,max:25,step:5,onChange:t=>i({taxInvestor:{...p.taxInvestor,cgtDiscountDelta:t/100}}),format:S,tooltip:v.expert?.cgtDiscountDelta?.tooltip}),e.jsx(j,{label:"Stamp duty â†’ land tax shift (0% to 100%)",value:p.taxInvestor.landTaxShift*100,min:0,max:100,step:10,onChange:t=>i({taxInvestor:{...p.taxInvestor,landTaxShift:t/100}}),format:S,tooltip:v.expert?.landTaxShift?.tooltip}),e.jsx(j,{label:"Vacancy tax intensity (0% to 100%)",value:p.taxInvestor.vacancyTaxIntensity*100,min:0,max:100,step:10,onChange:t=>i({taxInvestor:{...p.taxInvestor,vacancyTaxIntensity:t/100}}),format:S,tooltip:v.expert?.vacancyTaxIntensity?.tooltip}),e.jsx(j,{label:"Short-stay regulation intensity (0% to 100%)",value:p.taxInvestor.shortStayRegulationIntensity*100,min:0,max:100,step:10,onChange:t=>i({taxInvestor:{...p.taxInvestor,shortStayRegulationIntensity:t/100}}),format:S,tooltip:v.expert?.shortStayRegulationIntensity?.tooltip}),e.jsx(j,{label:"Foreign buyer restriction intensity (0% to 100%)",value:p.taxInvestor.foreignBuyerRestrictionIntensity*100,min:0,max:100,step:10,onChange:t=>i({taxInvestor:{...p.taxInvestor,foreignBuyerRestrictionIntensity:t/100}}),format:S,tooltip:v.expert?.foreignBuyerRestrictionIntensity?.tooltip}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Credit / macro-prudential"}),D["Credit / macro-prudential"].map(t=>e.jsx(b,{party:t},`credit-${t}`))]}),e.jsx(j,{label:"Serviceability buffer delta (âˆ’2pp to +3pp)",value:p.credit.serviceabilityBufferDelta*100,min:-2,max:3,step:.5,onChange:t=>i({credit:{...p.credit,serviceabilityBufferDelta:t/100}}),format:S,tooltip:v.expert?.serviceabilityBufferDelta?.tooltip}),e.jsx(j,{label:"DTI cap tightness (0% to 100%)",value:p.credit.dtiCapTightness*100,min:0,max:100,step:10,onChange:t=>i({credit:{...p.credit,dtiCapTightness:t/100}}),format:S,tooltip:v.expert?.dtiCapTightness?.tooltip}),e.jsx(j,{label:"Investor lending limit tightness (0% to 100%)",value:p.credit.investorLendingLimitTightness*100,min:0,max:100,step:10,onChange:t=>i({credit:{...p.credit,investorLendingLimitTightness:t/100}}),format:S,tooltip:v.expert?.investorLendingLimitTightness?.tooltip}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Demand-side subsidies"}),D["Demand-side subsidies"].map(t=>e.jsx(b,{party:t},`subsidies-${t}`))]}),e.jsx(j,{label:"First-home buyer subsidy intensity (0% to 100%)",value:p.subsidies.firstHomeBuyerSubsidyIntensity*100,min:0,max:100,step:10,onChange:t=>i({subsidies:{...p.subsidies,firstHomeBuyerSubsidyIntensity:t/100}}),format:S,tooltip:v.expert?.firstHomeBuyerSubsidyIntensity?.tooltip}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Rental settings"}),D["Rental settings"].map(t=>e.jsx(b,{party:t},`rental-${t}`))]}),e.jsx(j,{label:"Rent assistance intensity (0% to 100%)",value:p.rental.rentAssistanceIntensity*100,min:0,max:100,step:10,onChange:t=>i({rental:{...p.rental,rentAssistanceIntensity:t/100}}),format:S,tooltip:v.expert?.rentAssistanceIntensity?.tooltip}),e.jsxs("label",{className:"checkbox-field",style:{marginTop:6},children:[e.jsx("input",{type:"checkbox",checked:p.rental.rentRegulationCap!=null,onChange:t=>i({rental:{...p.rental,rentRegulationCap:t.target.checked?.03:null}})}),e.jsx("span",{children:"Enable rent growth cap"})]}),p.rental.rentRegulationCap!=null&&e.jsx(j,{label:"Rent growth cap (0% to 8% nominal/yr)",value:p.rental.rentRegulationCap*100,min:0,max:8,step:.5,onChange:t=>i({rental:{...p.rental,rentRegulationCap:t/100}}),format:S,tooltip:v.expert?.rentRegulationCap?.tooltip}),e.jsx(j,{label:"Rent regulation coverage (0% to 100%)",value:p.rental.rentRegulationCoverage*100,min:0,max:100,step:10,onChange:t=>i({rental:{...p.rental,rentRegulationCoverage:t/100}}),format:S,tooltip:v.expert?.rentRegulationCoverage?.tooltip}),e.jsxs("label",{className:"checkbox-field",children:[e.jsx("input",{type:"checkbox",checked:p.rental.vacancyDecontrol,onChange:t=>i({rental:{...p.rental,vacancyDecontrol:t.target.checked}})}),e.jsx("span",{children:"Vacancy decontrol (caps donâ€™t bind on turnover)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Planning / infrastructure"}),D["Planning / infrastructure"].map(t=>e.jsx(b,{party:t},`planning-${t}`))]}),e.jsx(j,{label:"Upzoning intensity (0% to 100%)",value:p.planning.upzoningIntensity*100,min:0,max:100,step:10,onChange:t=>i({planning:{...p.planning,upzoningIntensity:t/100}}),format:S,tooltip:v.expert?.upzoningIntensity?.tooltip}),e.jsx(j,{label:"Infrastructure enablement (0% to 100%)",value:p.planning.infrastructureEnablement*100,min:0,max:100,step:10,onChange:t=>i({planning:{...p.planning,infrastructureEnablement:t/100}}),format:S,tooltip:v.expert?.infrastructureEnablement?.tooltip}),e.jsx(j,{label:"Infrastructure lag (0 to 10 years)",value:p.planning.infrastructureLagYears,min:0,max:10,step:1,onChange:t=>i({planning:{...p.planning,infrastructureLagYears:t}}),tooltip:v.expert?.infrastructureLagYears?.tooltip}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Public & community housing"}),D["Public & community housing"].map(t=>e.jsx(b,{party:t},`public-${t}`))]}),e.jsx(j,{label:"Public housing build boost (0% to 20%)",value:p.publicCommunity.publicHousingBuildBoost*100,min:0,max:20,step:2,onChange:t=>i({publicCommunity:{...p.publicCommunity,publicHousingBuildBoost:t/100}}),format:S,tooltip:v.expert?.publicHousingBuildBoost?.tooltip}),e.jsx(j,{label:"Public acquisition share (0% to 1% of stock/yr)",value:p.publicCommunity.publicHousingAcquisitionSharePerYear*100,min:0,max:1,step:.1,onChange:t=>i({publicCommunity:{...p.publicCommunity,publicHousingAcquisitionSharePerYear:t/100}}),format:S,tooltip:v.expert?.publicHousingAcquisitionSharePerYear?.tooltip}),e.jsx(j,{label:"Private â†’ social conversion (0% to 1% of stock/yr)",value:p.publicCommunity.conversionToSocialSharePerYear*100,min:0,max:1,step:.1,onChange:t=>i({publicCommunity:{...p.publicCommunity,conversionToSocialSharePerYear:t/100}}),format:S,tooltip:v.expert?.conversionToSocialSharePerYear?.tooltip}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"14px 0 6px"},children:[e.jsx("div",{style:{fontWeight:800},children:"Population"}),D.Population.map(t=>e.jsx(b,{party:t},`pop-${t}`))]}),e.jsx(j,{label:"Net overseas migration shock (âˆ’30% to +30%)",value:p.migration.netOverseasMigrationShock*100,min:-30,max:30,step:5,onChange:t=>i({migration:{...p.migration,netOverseasMigrationShock:t/100}}),format:S,tooltip:v.expert?.netOverseasMigrationShock?.tooltip}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:10},children:"Tip: you can still use presets above, then fineâ€‘tune these subâ€‘levers for sensitivity testing."})]})]}),e.jsx(_,{title:"Policy Timing",icon:"â±ï¸",defaultOpen:!1,children:e.jsx(j,{label:"Ramp period",value:n.policy.rampYears,min:0,max:10,step:1,onChange:t=>i({rampYears:t}),format:t=>`${t} years`,tooltip:v.ramp.tooltip})})]})}function Se(n){if(n.indexBase==="year0")return n.year0;const a=n.history?.[0]?.year;return a??n.projected?.[0]?.year??n.year0}function Q(n,a){const i=n.find(s=>s.year===a);return typeof i?.value=="number"&&Number.isFinite(i.value)?i.value:null}function Ie(n){const a=(()=>{if(n.scope.level==="national")return n.cities;if(n.scope.level==="city"){const d=n.scope;return n.cities.filter(x=>x.cityId===d.city)}const u=n.scope;return n.cities.filter(d=>pe(d.cityId).state===u.state)})();if(a.length===0)return[];const i=n.history.startYear<=n.history.endYear?Array.from({length:n.history.endYear-n.history.startYear+1},(u,d)=>n.history.startYear+d):[],s={};a.forEach(u=>s[u.cityId]=u.population);const l=[];return i.forEach(u=>{const d=a.map(h=>{const I=n.history.byCity[h.cityId];if(!I)return null;const T=I.years.indexOf(u);return T<0?null:{cityId:h.cityId,medianPrice:I.medianPrice?.[T]??null,medianAnnualRent:I.medianAnnualRent?.[T]??null,medianAnnualWage:I.medianAnnualWage?.[T]??null,population:I.population?.[T]??null,dwellingStock:I.dwellingStock?.[T]??null}}).filter(Boolean);if(d.length===0)return;const x=d.map(h=>typeof h.population=="number"?h.population:s[h.cityId]??0),o=x.reduce((h,I)=>h+I,0)||1,g=x.map(h=>h/o),m=h=>{let I=0,T=0;if(h.forEach((f,N)=>{typeof f=="number"&&Number.isFinite(f)&&(I+=g[N]*f,T+=g[N])}),!(T<=0))return I/T},P=m(d.map(h=>h.population))??x.reduce((h,I)=>h+I,0),C=m(d.map(h=>h.dwellingStock)),R=m(d.map(h=>h.medianPrice)),E=m(d.map(h=>h.medianAnnualRent)),A=m(d.map(h=>h.medianAnnualWage)),c=typeof R=="number"&&typeof C=="number"?ue({medianPrice:R,dwellingStock:C,annualTurnoverRate:n.c.annualTurnoverRate,stampDutyRate:n.stampDutyRate}):void 0;l.push({year:u,kind:"historical",population:P,dwellingStock:C,medianPrice:R,medianAnnualRent:E,medianAnnualWage:A,stampDutyRevenue:c})}),l}function ke(n){const i=n.outputs.byRegion[te(n.scope)]?.years??[],s=!!n.historyBundle,l=n.historyBundle?Ie({scope:n.scope,cities:n.cities,history:n.historyBundle,c:n.c,stampDutyRate:n.stampDutyRate}):[],u=Se({indexBase:n.indexBase,history:l,projected:i,year0:n.year0}),d=Q((l.length?l:i).map(c=>({year:c.year,value:c.medianPrice})),u),x=Q((l.length?l:i).map(c=>({year:c.year,value:c.medianAnnualRent})),u),o=Q((l.length?l:i).map(c=>({year:c.year,value:c.medianAnnualWage})),u),g=(c,h)=>typeof c=="number"&&typeof h=="number"&&h>0?c/h*100:void 0,m=l.map(c=>({...c,priceIndex:g(c.medianPrice,d),rentIndex:g(c.medianAnnualRent,x),wageIndex:g(c.medianAnnualWage,o)})),P=i.map(c=>({year:c.year,kind:"projected",population:c.population,dwellingStock:c.dwellingStock,medianPrice:c.medianPrice,medianAnnualRent:c.medianAnnualRent,medianAnnualWage:c.medianAnnualWage,stampDutyRevenue:c.stampDutyRevenue,priceIndex:g(c.medianPrice,d),rentIndex:g(c.medianAnnualRent,x),wageIndex:g(c.medianAnnualWage,o)})),C=n.year0,R=new Set(m.map(c=>c.year)),E=[...m,...P.filter(c=>!R.has(c.year))].sort((c,h)=>c.year-h.year),A=[];return s||A.push("No historical series attached. Showing projections only."),s&&m.length===0&&A.push("History bundle attached, but no usable points for this scope."),{id:te(n.scope),scope:n.scope,cutoverYear:C,timeline:E,meta:{notes:[],warnings:A,historyAvailable:s}}}const we=w.lazy(()=>L(()=>import("./AustraliaCrisisMap-DbbdmbVb.js"),__vite__mapDeps([0,1,2])).then(n=>({default:n.AustraliaCrisisMap}))),ae=w.lazy(()=>L(()=>import("./PriceVsBaseline-BmNlO85R.js"),__vite__mapDeps([3,1,2,4,5,6])).then(n=>({default:n.PriceVsBaseline}))),Re=w.lazy(()=>L(()=>import("./WageVsHousingChart-5_pTe7MT.js"),__vite__mapDeps([7,1,2,4,5])).then(n=>({default:n.default}))),Ne=w.lazy(()=>L(()=>import("./OwnershipMixArea-OZseRz1T.js"),__vite__mapDeps([8,1,2,4,6])).then(n=>({default:n.DwellingStockArea}))),Pe=w.lazy(()=>L(()=>import("./DecileImpact-D8hvvIRP.js"),__vite__mapDeps([9,1,2])).then(n=>({default:n.DecileImpact}))),Ae=w.lazy(()=>L(()=>import("./InvestorFlow-Bix7hFVQ.js"),__vite__mapDeps([10,1,2])).then(n=>({default:n.PolicyChannelsFlow}))),Te=w.lazy(()=>L(()=>import("./PublicHousingCounter-CvXLTJVO.js"),__vite__mapDeps([11,1,2])).then(n=>({default:n.SummaryCounter})));function Be({params:n}){const a=n.advanced?.microDistributions,i=!!a?.enabled,s=a?.microdata?.meta;if(!i)return null;const l=(s?.warnings??[]).slice(),u=!!s?.inferredMappings,d=a?.microdata?.byCity;return(!d||Object.keys(d).length===0)&&l.unshift("Microdata is enabled, but no byCity microdata was provided. Stress metrics will use the proxy."),!u&&l.length===0?null:e.jsxs("div",{className:"callout warning",style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"Microdata mapping inferred"}),e.jsx("div",{style:{fontSize:13,lineHeight:1.5},children:"This run is using inferred column mappings for income/tenure/weights. For reliability, export the normalized schema (`income_annual_aud`, `tenure_code` as R/M/O, optional `weight`) or pass `fields` + `tenureMap` explicitly."}),l.length>0&&e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:13},children:l.slice(0,3).map((x,o)=>e.jsx("li",{children:x},o))}),s?.notes?.length?e.jsxs("details",{style:{marginTop:8},children:[e.jsx("summary",{style:{cursor:"pointer",fontWeight:600},children:"Show detection details"}),e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:12,color:"var(--muted)"},children:s.notes.slice(0,12).map((x,o)=>e.jsx("li",{children:x},o))})]}):null]})}function Ee(n){let a=10;const i={federal:[],state:[],industry:[],implementation:[],severity:{federal:"Low",state:"Low",industry:"Low",implementation:"Low"}};n.negativeGearingMode!=="none"&&(a+=22,i.federal.push("Federal tax changes are sensitive to Senate crossâ€‘bench and independents."),i.industry.push("Investor tax concessions are politically sensitive and face strong coordinated pushback."),i.industry.push("Past reform attempts suggest high likelihood of campaign-style opposition.")),n.ownershipCapEnabled&&(a+=28,i.implementation.push("Ownership caps trigger legal risk and constitutional challenges."),i.implementation.push("Administrative enforcement complexity can delay passage and weaken design."),i.industry.push("Likely opposition from property investment lobbies and landlord associations.")),(n.taxInvestor.landTaxShift>.2||n.stampDutyRateDelta<-.01)&&(a+=12,i.federal.push("State revenue exposure creates intergovernmental friction."),i.state.push("State parliaments control land tax and stamp duty; reform requires state buyâ€‘in."),i.implementation.push("Transition funding and compensation become major negotiation points.")),n.taxInvestor.cgtDiscountDelta<-.1&&(a+=10,i.federal.push("Federal tax measures are exposed to Senate crossâ€‘bench bargaining."),i.industry.push("CGT discount reductions often trigger coordinated investor and media lobbying.")),(n.taxInvestor.vacancyTaxIntensity>.2||n.taxInvestor.shortStayRegulationIntensity>.2)&&(a+=8,i.industry.push("Shortâ€‘stay platforms, hosts, and landlord groups commonly oppose vacancy/STR rules."),i.industry.push("Tourism operators and local business groups often weigh in on shortâ€‘stay rules."),i.implementation.push("Local government capacity to enforce is a common bottleneck.")),(n.rental.rentRegulationCoverage>.2||n.rental.rentRegulationCap!=null)&&(a+=16,i.state.push("Tenancy law changes are stateâ€‘based and can vary widely by jurisdiction."),i.industry.push("Rent caps or broad coverage face landlord, agent, and investor opposition."),i.industry.push("Risk of reduced rental listings is a frequent political argument.")),(n.credit.serviceabilityBufferDelta>.01||n.credit.dtiCapTightness>.2)&&(a+=8,i.federal.push("Macroâ€‘prudential tightening faces regulator caution (APRA/RBA)."),i.industry.push("Banking sector lobbying is influential on prudential settings."),i.industry.push("Credit tightening can be framed as firstâ€‘homeâ€‘buyer exclusion.")),(n.publicCommunity.publicHousingBuildBoost>.1||n.publicCommunity.publicHousingAcquisitionSharePerYear>.02)&&(a+=10,i.state.push("Large public build/acquisition requires longâ€‘term funding certainty."),i.industry.push("Construction capacity and land availability constrain delivery speed."),i.implementation.push("Procurement timelines and social housing pipeline governance add friction.")),(n.supplyBoost>.15||n.planning.upzoningIntensity>.3)&&(a+=9,i.state.push("Planning reforms are stateâ€‘led with local council veto points."),i.state.push("Local planning appeal processes can slow delivery."),i.industry.push("Upzoning and rapid supply shifts face NIMBY opposition."),i.implementation.push("Infrastructure sequencing and developer feasibility can slow rollouts.")),n.migration.netOverseasMigrationShock<-.1&&(a+=7,i.federal.push("Federal migration settings can be sensitive to Senate crossâ€‘bench deals."),i.industry.push("Education sector, business groups, and unions often lobby on migration settings."),i.implementation.push("Migration cuts intersect with workforce shortages and growth objectives.")),n.subsidies.firstHomeBuyerSubsidyIntensity>.15&&(a+=4,i.federal.push("Budget scrutiny increases when subsidies are large or ongoing."),i.industry.push("Large buyer subsidies can be criticized for inflating prices.")),n.rental.rentAssistanceIntensity>.15&&(a+=4,i.federal.push("Rent assistance expansions increase fiscal costs and budget scrutiny."),i.industry.push("Landlord passâ€‘through risk is a common policy critique.")),n.taxInvestor.foreignBuyerRestrictionIntensity>.3&&(a+=6,i.federal.push("Diplomatic and trade considerations can slow federal reforms."),i.industry.push("Foreign buyer restrictions can create trade and investment tensions.")),n.taxInvestor.vacancyTaxIntensity>.4&&(a+=4,i.implementation.push("High vacancy tax settings raise enforcement and measurement challenges."),i.implementation.push("Data sharing between agencies becomes a political and technical hurdle.")),n.credit.investorLendingLimitTightness>.3&&(a+=6,i.federal.push("APRA/RBA coordination can slow rapid changes."),i.industry.push("Investor lending limits often meet coordinated banking sector pushback.")),n.planning.infrastructureEnablement>.4&&(a+=6,i.state.push("Infrastructure enablement requires multiâ€‘year capital plans and approvals."),i.implementation.push("State treasury capacity and project pipelines can constrain timing.")),n.publicCommunity.conversionToSocialSharePerYear>.02&&(a+=6,i.implementation.push("Rental conversion programs can face legal and compensation disputes."),i.industry.push("Private rental market groups typically resist compulsory conversion programs.")),n.ownershipCapEnabled&&n.ownershipCapEnforcement>.5&&(a+=6,i.implementation.push("High enforcement levels can trigger privacy and compliance pushback."),i.implementation.push("Data matching across agencies raises governance and civilâ€‘liberty concerns.")),n.negativeGearingMode==="remove"&&n.negativeGearingIntensity>.5&&(a+=6,i.industry.push("Rapid phaseâ€‘outs often amplify shortâ€‘term political backlash."),i.industry.push("Investor sentiment impacts can become a headline risk.")),n.demandReduction>.1&&(a+=5,i.industry.push("Large demand reductions can be framed as harming household wealth."),i.industry.push("Retiree and investor advocacy groups can mobilize quickly.")),n.supplyBoost>.2&&(a+=5,i.industry.push("Construction unions and contractors can resist aggressive cost compression."),i.implementation.push("Very large supply boosts may be seen as unrealistic within workforce limits.")),i.implementation.push("Implementation complexity increases when multiple levers are combined."),i.federal.push("Stakeholder alignment (state vs federal) is often the decisive constraint."),i.state.push("State legislative calendars and election cycles can delay or dilute reforms.");const s=d=>d>=4?"High":d>=2?"Medium":"Low";i.severity={federal:s(i.federal.length),state:s(i.state.length),industry:s(i.industry.length),implementation:s(i.implementation.length)},a=Math.min(100,a);const l=a<=18?"Easy":a<=32?"Moderate":a<=52?"Challenging":a<=72?"Hard":"Highly Improbable";return{rating:l,score:a,factors:i,summary:l==="Easy"?"Low conflict with entrenched interests; likely to pass if politically prioritized.":l==="Moderate"?"Some pushback expected, but feasible with negotiation.":l==="Challenging"?"Multiple stakeholder veto points; passage likely needs strong mandate.":l==="Hard"?"Significant industry and political resistance expected.":"Would likely require exceptional political alignment or crisis conditions."}}function De({scope:n,cityCount:a}){const i=X(n),s=n.level==="national"?"ðŸ‡¦ðŸ‡º":n.level==="state"?"ðŸ“":"ðŸ™ï¸";return e.jsxs("div",{className:"scope-badge",children:[e.jsx("span",{children:s}),e.jsx("span",{children:i}),n.level==="national"&&e.jsxs("span",{className:"muted",children:["(",a," cities)"]})]})}function Ye({params:n,calibrationReport:a}){const i=Z(n.policy),s=ye(i),l=xe(i),u=!!n.advanced?.calibration?.enabled,d=!!n.advanced?.calibration?.historyByCity,x=[];return s.length>0&&(!u||!d)&&x.push("Calibration-first levers are active but no historical series are attached. Treat results as directional."),l.length>0&&x.push(`Some levers are at hard bounds (the model clamps to realistic ranges): ${l.slice(0,4).join(", ")}${l.length>4?"â€¦":""}`),(a?.warnings??[]).slice(0,2).forEach(o=>x.push(o)),x.length===0?null:e.jsxs("div",{className:"callout warning",style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:800,marginBottom:4},children:"Calibration & bounds"}),e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:13},children:x.map((o,g)=>e.jsx("li",{children:o},g))})]})}function ze({params:n}){const a=n.advanced?.calibration?.historyBundle;if(!a)return null;const i=[],s=a?.meta?.warnings,l=a?.meta?.notes;return Array.isArray(s)&&s.length&&i.push(...s.slice(0,3)),i.length===0?null:e.jsxs("div",{className:"callout warning",style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:800,marginBottom:4},children:"Historical data coverage"}),e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:13},children:i.map((u,d)=>e.jsx("li",{children:u},d))}),Array.isArray(l)&&l.length?e.jsxs("details",{style:{marginTop:8},children:[e.jsx("summary",{style:{cursor:"pointer",fontWeight:600},children:"Show history notes"}),e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:12,color:"var(--muted)"},children:l.slice(0,10).map((u,d)=>e.jsx("li",{children:u},d))})]}):null]})}function Le({params:n}){const a=[],s=n.advanced?.microDistributions?.microdata?.meta?.sanitization;s&&(s.droppedCityKeys||s.droppedRows||s.truncatedRows)&&a.push(`Microdata sanitized: dropped ${s.droppedCityKeys} invalid city keys, dropped ${s.droppedRows} non-object rows, truncated ${s.truncatedRows} rows (cap ${s.maxRowsPerCity}/city).`);const l=n.advanced?.calibration?.historyBundle;if(l){const u=ve(l).report;u.ok&&(u.droppedCityKeys||u.cappedPoints)&&a.push(`History bundle sanitized: dropped ${u.droppedCityKeys} invalid city keys, capped ${u.cappedPoints} year-points (max ${u.maxYears} years).`)}return a.length===0?null:e.jsxs("div",{className:"callout warning",style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:800,marginBottom:4},children:"Input sanitization applied"}),e.jsx("ul",{style:{margin:"8px 0 0 18px",fontSize:13},children:a.map((u,d)=>e.jsx("li",{children:u},d))})]})}function Me(){const{scope:n,scopedView:a,selectedCityData:i,params:s,outputs:l,calibrationReport:u,showHistory:d,historyIndexBase:x,focusYear:o,setFocusYear:g,selectedPresets:m}=se(),{years:P}=a,C=P[0];if(!C||P.length===0)return e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:16},children:"â³"}),e.jsx("div",{className:"h2",children:"Loading simulation..."}),e.jsxs("div",{className:"muted",children:["Calculating outcomes for ",s.cities.length," cities"]})]});const R=i?.years[i.years.length-1]?.deciles.rows??null,{c:E}=me(s),A=d?ke({outputs:l,scope:n,historyBundle:s.advanced?.calibration?.historyBundle,cities:s.cities,c:E,stampDutyRate:E.stampDutyEffectiveRate+(s.policy.stampDutyRateDelta??0),year0:C.year,indexBase:x}):null,c=A?A.timeline:P,h=A?A.cutoverYear:C.year,I=o??c[c.length-1]?.year??C.year,T=(()=>{const r=x==="year0"?C.year:c[0]?.year,y=c.find(t=>t.year===r);return{medianPrice:y?.medianPrice??C.medianPrice,medianAnnualRent:y?.medianAnnualRent??C.medianAnnualRent}})(),f=Z(s.policy),N=ge,k=Ee(f),H=(r,y)=>y.split(".").reduce((t,M)=>t?t[M]:void 0,r),z=(r,y)=>y==null?"n/a":r.includes("rentRegulationCap")?`${Math.round(y*100)}% cap`:typeof y=="boolean"?y?"enabled":"disabled":Math.abs(y)<1e-9?"0":r.includes("Rate")||r.includes("Delta")?`${(y*100).toFixed(1)}pp`:r.includes("Intensity")||r.includes("Share")||r.includes("Boost")?`${Math.round(y*100)}%`:r.includes("LagYears")||r.includes("rampYears")?`${y} years`:`${Math.round(y*100)}%`,p=(()=>{const r=[];return he.forEach(y=>{const t=H(f,y.key),M=H(N,y.key);y.key,t!==M&&r.push({key:y.key,label:y.label,value:z(y.key,t),parties:Y[y.key]??[]})}),f.negativeGearingMode!==N.negativeGearingMode&&r.push({key:"negativeGearingMode",label:"Negative gearing mode",value:f.negativeGearingMode,parties:Y.negativeGearingMode??[]}),f.negativeGearingIntensity!==N.negativeGearingIntensity&&r.push({key:"negativeGearingIntensity",label:"Negative gearing intensity",value:z("negativeGearingIntensity",f.negativeGearingIntensity),parties:Y.negativeGearingIntensity??[]}),f.ownershipCapEnabled!==N.ownershipCapEnabled&&r.push({key:"ownershipCapEnabled",label:"Ownership cap",value:f.ownershipCapEnabled?"enabled":"disabled",parties:Y.ownershipCapEnabled??[]}),f.ownershipCapEnforcement!==N.ownershipCapEnforcement&&r.push({key:"ownershipCapEnforcement",label:"Ownership cap enforcement",value:z("ownershipCapEnforcement",f.ownershipCapEnforcement),parties:Y.ownershipCapEnforcement??[]}),f.excessInvestorStockShare!==N.excessInvestorStockShare&&r.push({key:"excessInvestorStockShare",label:"Excess investor stock share",value:z("excessInvestorStockShare",f.excessInvestorStockShare),parties:Y.excessInvestorStockShare??[]}),f.divestmentPhased!==N.divestmentPhased&&r.push({key:"divestmentPhased",label:"Divestment phasing",value:f.divestmentPhased?"phased":"immediate",parties:Y.divestmentPhased??[]}),f.stampDutyRateDelta!==N.stampDutyRateDelta&&r.push({key:"stampDutyRateDelta",label:"Stamp duty rate delta",value:z("stampDutyRateDelta",f.stampDutyRateDelta),parties:Y.stampDutyRateDelta??[]}),f.mortgageRateDelta!==N.mortgageRateDelta&&r.push({key:"mortgageRateDelta",label:"Mortgage rate delta",value:z("mortgageRateDelta",f.mortgageRateDelta),parties:Y.mortgageRateDelta??[]}),f.rampYears!==N.rampYears&&r.push({key:"rampYears",label:"Policy ramp years",value:z("rampYears",f.rampYears),parties:Y.rampYears??[]}),r})(),$=m.filter(r=>r!=="baseline"),G=$.flatMap(r=>B[r]??[]),K=p.flatMap(r=>r.parties),W=je([...G,...K]),U=W.top.length?W.top.map(r=>le[r].label).join(" / "):"None (baseline only)";return e.jsxs("div",{className:"explore-layout",children:[e.jsx("aside",{className:"explore-sidebar",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"explore-main",children:[e.jsxs("div",{className:"explore-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h1",style:{margin:0},children:"Explore the model"}),e.jsx("p",{className:"muted",style:{margin:"4px 0 0 0",fontSize:14},children:"Adjust controls on the left. Results update instantly."}),e.jsx("p",{className:"muted",style:{margin:"6px 0 0 0",fontSize:12},children:"This model is a free tool developed by the not-for-profit consumer advocacy and research team at SOCii."})]}),e.jsx(De,{scope:n,cityCount:s.cities.length})]}),e.jsx(Ye,{params:s,calibrationReport:u}),e.jsx(Le,{params:s}),e.jsx(ze,{params:s}),e.jsx(Be,{params:s}),e.jsx("div",{className:"card",style:{padding:12,marginBottom:10},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700},children:"Year focus"}),e.jsx("div",{className:"muted",style:{fontSize:12},children:"Jump to a specific year; charts and map will highlight that year."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("select",{className:"select-field",value:I,onChange:r=>g(Number(r.target.value)),"aria-label":"Select focus year",children:c.map(r=>e.jsx("option",{value:r.year,children:r.year},`yr-${r.year}`))}),e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>g(null),title:"Return to latest year",children:"Latest"})]})]})}),e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading mapâ€¦"}),children:e.jsx(we,{outputs:l,params:s,year:I,historyBundle:s.advanced?.calibration?.historyBundle,title:`Regional crisis heatmap â€” ${X(n)}`,scope:n})}),e.jsxs("div",{className:"chart-grid-primary",children:[e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading chartâ€¦"}),children:e.jsx(ae,{title:"Housing prices",series:c,dataKey:"medianPrice",baseValue:T.medianPrice,cutoverYear:h,onHoverYear:g})}),e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading chartâ€¦"}),children:e.jsx(ae,{title:"Rents",series:c,dataKey:"medianAnnualRent",baseValue:T.medianAnnualRent,cutoverYear:h,onHoverYear:g})})]}),e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading summaryâ€¦"}),children:e.jsx(Te,{})}),e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading chartâ€¦"}),children:e.jsx(Re,{years:c,scopeLabel:X(n),cutoverYear:h,onHoverYear:g})}),e.jsxs("div",{className:"chart-grid-secondary",children:[e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading chartâ€¦"}),children:e.jsx(Ne,{series:c,onHoverYear:g})}),i&&e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading chartâ€¦"}),children:e.jsx(Ae,{series:i.years})})]}),R&&e.jsxs("div",{className:"decile-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"h2",style:{margin:0},children:"Distributional impact"}),e.jsx("span",{className:"badge-warning",children:"Proxy estimate"})]}),e.jsx(w.Suspense,{fallback:e.jsx("div",{className:"card",style:{padding:16},children:"Loading distributionâ€¦"}),children:e.jsx(Pe,{rows:R})})]}),e.jsxs("details",{className:"help-panel",children:[e.jsxs("summary",{className:"help-panel-trigger",children:[e.jsx("span",{children:"ðŸ’¡"}),e.jsx("span",{children:"How to interpret results"})]}),e.jsxs("div",{className:"help-panel-content",children:[e.jsx(ne,{summary:"Understanding the charts",defaultOpen:!0,children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Price/Rent index:"})," 100 = no change, 200 = doubled"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stock vs demand:"})," Gap = market tightness"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Trend colors:"})," Green = improving, Red = worsening"]})]})}),e.jsx(ne,{summary:"Common questions",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Why do rents increase with NG removal?"})," Short-term rental supply shock"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Why delayed ownership cap effects?"})," Divestment over ramp period"]})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,marginTop:14},children:[e.jsx("div",{className:"h2",style:{marginTop:0},children:"Policy summary"}),e.jsx("div",{className:"muted",style:{fontSize:13,marginBottom:10},children:"Summary of selected policies and their typical party associations. This is informational only and not an endorsement."}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:12},children:[e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"var(--muted)"},children:"Color key:"}),q.map(r=>e.jsx(b,{party:r},`legend-${r}`))]}),e.jsxs("div",{style:{display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Active presets"}),$.length===0?e.jsx("div",{className:"muted",style:{fontSize:13},children:"Baseline only (no preset selected)."}):e.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:13},children:$.map(r=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx("span",{children:r}),(B[r]??[]).map(y=>e.jsx(b,{party:y},`${r}-${y}`))]},r))})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Manual adjustments"}),p.length===0?e.jsx("div",{className:"muted",style:{fontSize:13},children:"No manual policy changes from baseline."}):e.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:13},children:p.map(r=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsxs("span",{children:[r.label,": ",e.jsx("strong",{children:r.value})]}),r.parties.map(y=>e.jsx(b,{party:y},`${r.key}-${y}`))]},r.key))})]}),e.jsxs("div",{style:{paddingTop:6,borderTop:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Most represented party in selected policies"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:U}),W.top.map(r=>e.jsx(b,{party:r},`top-${r}`))]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:6},children:"Based on the count of party associations across your selected policies (presets + manual adjustments)."})]}),e.jsxs("div",{style:{paddingTop:10,borderTop:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Feasibility & pushback assessment"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[e.jsxs("span",{style:{fontSize:13},children:["Difficulty: ",e.jsx("strong",{children:k.rating})]}),e.jsxs("span",{className:"muted",style:{fontSize:12},children:["(score ",k.score,"/100)"]})]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:k.summary}),Object.values(k.factors).some(r=>Array.isArray(r)&&r.length>0)&&e.jsx("div",{style:{display:"grid",gap:8,fontSize:12},children:[["Federal",k.factors.federal,k.factors.severity.federal],["State",k.factors.state,k.factors.severity.state],["Industry",k.factors.industry,k.factors.severity.industry],["Implementation",k.factors.implementation,k.factors.severity.implementation]].map(([r,y,t])=>y.length?e.jsxs("details",{className:"help-panel",style:{padding:10},children:[e.jsxs("summary",{className:"help-panel-trigger",style:{gap:8},children:[e.jsx("span",{children:r}),e.jsxs("span",{className:"muted",style:{fontSize:11},children:["Severity: ",e.jsx("strong",{children:t})]})]}),e.jsx("div",{className:"help-panel-content",children:e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:y.map((M,ee)=>e.jsx("li",{children:M},`${r}-${ee}`))})})]},r):null)}),e.jsx("div",{className:"muted",style:{fontSize:11,marginTop:8},children:"Heuristic assessment only; actual feasibility depends on timing, coalitions, and implementation details."})]})]})]})]})]})}const $e=Object.freeze(Object.defineProperty({__proto__:null,ExploreModel:Me},Symbol.toStringTag,{value:"Module"}));export{$e as E,be as s};
//# sourceMappingURL=ExploreModel-OJRoENv_.js.map
