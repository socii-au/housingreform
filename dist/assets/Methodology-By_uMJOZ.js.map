{"version":3,"file":"Methodology-By_uMJOZ.js","sources":["../../src/content/methodology.md?raw","../../src/routes/Methodology.tsx"],"sourcesContent":["export default \"# Methodology (scenario explainer, not a forecast)\\n\\nThis app is a **scenario explainer**. It is designed to help users reason about **directional cause → effect** relationships in housing policy using **transparent, adjustable assumptions**.\\n\\n## What we output (and what we avoid)\\n\\n- We output **time series** per **City + State + National** in a single run.\\n- We show **indices** (e.g., year 0 = 100) and **relative changes** rather than claiming exact future prices.\\n- We surface **warnings** when inputs are inferred (microdata) or when policies are **running unvalidated** (calibration-first levers without history).\\n\\n## Core model structure (high level)\\n\\nEach year, for each city, we compute:\\n\\n- **Household demand** (from population and household formation)\\n- **Dwelling supply** (stock evolves by completions minus demolitions)\\n- A **supply gap** \\\\((\\\\text{households} - \\\\text{stock}) / \\\\text{stock}\\\\)\\n- **Price and rent growth** as a function of the supply gap (via configurable curves)\\n\\nThen we apply policy channels (below) that perturb **demand, rental availability, turnover, completions, and migration**. Results are aggregated into state and national views (population-weighted unless explicit weights are provided).\\n\\n## Engines\\n\\n- **Aggregate engine**: cities are simulated independently, then aggregated.\\n- **Advanced engine**: cities are coupled via **spatial equilibrium (migration reallocation)**, with optional **heterogeneous expectations** and **portfolio investor demand**.\\n\\n## Inputs\\n\\n### City baselines\\n\\nEach included city has a baseline (`CityBaseState`) including (illustrative):\\n\\n- population, net migration, natural growth\\n- dwelling stock, completions, demolitions\\n- median price, median annual rent\\n- median annual wage + wage growth rate\\n- mortgage rate / term\\n- investor dwelling share\\n\\n### Policy levers (v2)\\n\\nPolicies are grouped by family (see `src/model/methodology.ts` and `src/model/policyRegistry.ts`).\\n\\nThere are **core** levers (always visible) plus **expert, calibration-first** levers (advanced controls).\\n\\n## Policy levers → model channels (mapping table)\\n\\nAll policy families feed into a common normalized channel object (computed per city-year).\\n\\n| Policy family | Lever examples | Primary channels | What it changes in the simulation |\\n|---|---|---|---|\\n| Negative gearing / ownership cap | NG mode/intensity; cap enforcement | investor demand, forced divestment, rental availability | shifts investor buy-side pressure; may reduce rental supply when rentals become owner-occupied |\\n| Tax & investor incentives | CGT discount; vacancy tax; short-stay regulation; foreign buyer rules | investor demand, rental availability, turnover | lowers/raises investor demand; nudges underused/short-stay stock into long-term rental; adjusts turnover proxy |\\n| Credit / macroprudential | serviceability buffer; DTI caps; investor lending limits | owner-occupier demand, investor demand | tightens/loosens effective borrowing capacity |\\n| Demand-side subsidies | first-home buyer subsidy | owner-occupier demand | modestly raises OO demand (timing/borrowing proxy) |\\n| Rental settings | rent assistance; rent growth cap + coverage | renter stress (micro), rent growth path | reduces renter stress; blends a nominal rent growth cap for covered rentals |\\n| Planning / infrastructure | upzoning; enabling infrastructure (+ lag) | completions, capacity limits | modestly raises completions and/or lifts capacity after a lag |\\n| Public/community housing | build program; acquisition; conversions | completions, rental pressure | adds (bounded) completions and reduces rental pressure (shape-first) |\\n| Population | net overseas migration shock | net migration | scales baseline migration before (advanced) spatial reallocation |\\n\\n## Real-world constraints (hard bounds)\\n\\nTo avoid implausible jumps:\\n\\n- Core sliders like **Supply boost** and **Demand reduction** are **hard-clamped** to realistic ranges.\\n- **Completions are capped** by year-over-year construction capacity limits (cannot double overnight).\\n- Turnover is bounded to plausible ranges when transaction frictions are adjusted.\\n\\nThe UI surfaces when levers are **at bounds** (“clamped”).\\n\\n## Calibration-first framework (affordability ratios)\\n\\nMany expert levers are intentionally **calibration-first**: they can run without calibration, but are meant to be estimated/validated using historical city time series.\\n\\n### Targets\\n\\nPrimary targets:\\n\\n- **Price-to-income** (median price / median annual wage)\\n- **Rent-to-income** (median annual rent / median annual wage)\\n\\n### Current calibrator\\n\\nThe current calibrator (`src/model/calibration/calibrateScenario.ts`) fits a first-pass global parameter:\\n\\n- `marketAdjustmentSpeed`\\n\\nIt reports per-city residual metrics and warns when historical coverage is incomplete. This is scaffolding for expanding calibration to additional parameters.\\n\\n### How to attach history (developer workflow)\\n\\nProvide `ScenarioParams.advanced.calibration.historyByCity` as city-year series (price/rent/wage/pop/stock). When enabled, the UI will surface calibration status and warnings.\\n\\n## Historical timeline overlay (past→present→future)\\n\\nThe UI can optionally show a **past-to-future timeline** by attaching a historical series bundle (as close to year 2000 as available). Charts then render:\\n\\n- **Historical** observations (muted)\\n- A vertical marker at **year0** labeled “Model starts”\\n- **Projected** scenario outputs (normal styling)\\n\\n### Data expectations\\n\\nHistorical series are provided per city (preferred “truth”), with state/national derived by aggregating city histories. The bundle supports partial series and missing years, but the system will:\\n\\n- align all cities to a common year range (e.g., 2000–2024)\\n- impute missing values conservatively and **flag** that imputation\\n- emit `meta.warnings` when coverage is weak or units look wrong\\n\\n### Index base options\\n\\nCharts can index the full timeline to either:\\n\\n- earliest historical year (e.g., 2000 = 100), or\\n- baseline year (year0 = 100)\\n\\n### Transparency and warnings\\n\\nWhen historical data is missing or heavily imputed, the app surfaces warnings in the Explore view and in the Trust & transparency footer so it’s clear which parts of the timeline are observed versus inferred.\\n\\n## Microdata (ABS SIH/CSHCV-derived, HILDA, synthetic reinforcement)\\n\\nThe model can optionally compute **tenure-specific stress rates** from microdata (instead of the decile proxy).\\n\\n### Canonical micro record format\\n\\nMicrodata is normalized into:\\n\\n- `income`: **gross annual household income** (AUD)\\n- `tenure`: `\\\"renter\\\" | \\\"mortgaged\\\" | \\\"outright\\\" | \\\"investor\\\"` (investor optional)\\n- `weight?`: optional survey weight (defaults to 1)\\n\\n### Recommended export convention (ideal pipeline)\\n\\nTo make ABS + HILDA interchangeable, export:\\n\\n- `income_annual_aud`\\n- `tenure_code`: `R`, `M`, `O` (and optionally `I`)\\n- optional `weight`\\n\\n### Autodetect mode (messy inputs)\\n\\nIf `fields`/`tenureMap` are omitted, the system attempts to infer them and emits **warnings**.\\nIt also warns when income units look implausible for **gross annual AUD** and when city coverage is incomplete.\\n\\n## Placeholder distribution note\\n\\nThe decile view remains explicitly a **proxy** when microdata is not provided. It is intended for UI comparability and “shape-first” exploration, not distributional measurement.\\n\\n## Where to edit the model\\n\\n- `src/model/methodology.ts`: constants, curves, shared formulas\\n- `src/model/policies/*`: policy families → channel deltas\\n- `src/model/runScenario.ts`: yearly simulation + aggregation + scoping\\n- `src/model/calibration/*`: calibration scaffolding\\n- `src/model/microdata/*`: microdata normalization + validation\\n\"","import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport methodologyMd from \"../content/methodology.md?raw\";\n\nfunction safeUri(uri: string): string {\n  const u = (uri ?? \"\").trim();\n  // Block javascript: and data: by default. Allow relative and http(s).\n  if (/^javascript:/i.test(u)) return \"\";\n  if (/^data:/i.test(u)) return \"\";\n  return u;\n}\n\nfunction downloadText(filename: string, text: string) {\n  const blob = new Blob([text], { type: \"text/markdown;charset=utf-8\" });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  a.remove();\n  URL.revokeObjectURL(url);\n}\n\nexport function Methodology() {\n  return (\n    <div>\n      <div className=\"h1\">Methodology</div>\n      <p className=\"muted\" style={{ marginTop: 0 }}>\n        Plain-English summary of assumptions and limitations. All calculations are client-side and visible in code.\n        <span style={{ display: \"block\", marginTop: 6 }}>\n          This model is a free tool developed by the not-for-profit consumer advocacy and research team at SOCii.\n        </span>\n      </p>\n\n      <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\", marginBottom: 12 }}>\n        <button\n          type=\"button\"\n          onClick={() => downloadText(\"housing-reform-model-methodology.md\", methodologyMd)}\n          style={{\n            padding: \"10px 12px\",\n            borderRadius: 12,\n            border: \"1px solid var(--border)\",\n            background: \"white\",\n            cursor: \"pointer\",\n            fontWeight: 650\n          }}\n        >\n          Download methodology summary\n        </button>\n      </div>\n\n      <div className=\"card\" style={{ padding: 16 }}>\n        <ReactMarkdown\n          remarkPlugins={[remarkGfm]}\n          skipHtml\n          components={{\n            a: ({ node, href, ...props }) => {\n              const safe = safeUri(href ?? \"\");\n              return <a {...props} href={safe} target=\"_blank\" rel=\"noopener noreferrer\" />;\n            },\n            img: ({ src, alt, ...props }) => {\n              const safe = safeUri(src ?? \"\");\n              return <img {...props} src={safe} alt={alt ?? \"\"} loading=\"lazy\" decoding=\"async\" />;\n            },\n          }}\n        >\n          {methodologyMd}\n        </ReactMarkdown>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":["methodologyMd","safeUri","uri","u","downloadText","filename","text","blob","url","a","Methodology","jsx","jsxs","ReactMarkdown","remarkGfm","node","href","props","safe","src","alt"],"mappings":"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"}